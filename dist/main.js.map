{"version":3,"sources":["main.js"],"names":["EasyAjax","baseUrl","xhr","XMLHttpRequest","query","Promise","resolve","reject","open","addEventListener","ev","response","parseResponse","target","error","makeError","send","data","result","undefined","JSON","parse","e","console","log","Error","name","message"],"mappings":"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","file":"main.js","sourcesContent":["let EasyAjax = (function() {\n\tclass EasyAjax {\n\t\tconstructor(baseUrl) {\n\t\t\tthis.baseUrl = baseUrl;\n\t\t\tthis.xhr = new XMLHttpRequest();\n\t\t}\n\n\t\tget(query) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tlet xhr = this.xhr;\n\t\t\t\txhr.open('GET', this.baseUrl + query, true);\n\t\t\t\txhr.addEventListener('load', function(ev) {\n\t\t\t\t\tlet response = parseResponse(ev.target.response);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\txhr.addEventListener('error', function (ev) {\n\t\t\t\t\tlet error = makeError(ev.target);\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t\t\txhr.send();\t\t\n\t\t\t});\n\t\t}\n\n\t\tpost(query, data) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tlet xhr = this.xhr;\n\t\t\t\txhr.open('POST', this.baseUrl + query, true);\n\t\t\t\txhr.addEventListener('load', function(ev) {\n\t\t\t\t\tlet response = parseResponse(ev.target.response);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\txhr.addEventListener('error', function (ev) {\n\t\t\t\t\tlet error = makeError(ev.target);\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t\t\txhr.send(data);\t\t\n\t\t\t});\n\t\t}\n\n\t\tput(query, data) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tlet xhr = this.xhr;\n\t\t\t\txhr.open('PUT', this.baseUrl + query, true);\n\t\t\t\txhr.addEventListener('load', function(ev) {\n\t\t\t\t\tlet response = parseResponse(ev.target.response);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\txhr.addEventListener('error', function (ev) {\n\t\t\t\t\tlet error = makeError(ev.target);\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t\t\txhr.send(data);\t\t\n\t\t\t});\n\t\t}\n\n\t\tsetBaseUrl(baseUrl) {\n\t\t\tthis.baseUrl = baseUrl;\n\t\t}\n\t}\n\n\tfunction parseResponse(response) {\n\t\tlet result = undefined;\n\t\ttry {\n\t\t\tresult = JSON.parse(response);\n\t\t} catch(e) {\n\t\t\tresult = response;\n\t\t\tconsole.log('Error: ', e, result);\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction makeError(data) {\n\t\tlet error = new Error();\n\t\terror.name = 'UrlError';\n\t\terror.message = 'Incorrect URL';\n\t\terror.data = data;\n\t\treturn error;\n\t}\n\n\treturn EasyAjax;\n})();\n"],"sourceRoot":"/source/"}