{"version":3,"sources":["main.js"],"names":["EasyAjax","baseUrl","query","makeRequest","call","data","type","Promise","resolve","reject","xhr","XMLHttpRequest","open","addEventListener","ev","response","parseResponse","target","error","makeError","setRequestHeader","send","result","undefined","JSON","parse","e","console","log","Error","name","message"],"mappings":";;;;;;AAAA,IAAIA,WAAY,YAAW;AAAA,KACpBA,QADoB;AAEzB,oBAAYC,OAAZ,EAAqB;AAAA;;AACpB,QAAKA,OAAL,GAAeA,OAAf;AACA;;AAJwB;AAAA;AAAA,uBAMrBC,KANqB,EAMd;AACV,WAAOC,YAAYC,IAAZ,CAAiB,IAAjB,EAAuB,KAAvB,EAA8BF,KAA9B,CAAP;AACA;AARwB;AAAA;AAAA,wBAUpBA,KAVoB,EAUbG,IAVa,EAUP;AACjB,WAAOF,YAAYC,IAAZ,CAAiB,IAAjB,EAAuB,MAAvB,EAA+BF,KAA/B,EAAsCG,IAAtC,CAAP;AACA;AAZwB;AAAA;AAAA,uBAcrBH,KAdqB,EAcdG,IAdc,EAcR;AAChB,WAAOF,YAAYC,IAAZ,CAAiB,IAAjB,EAAuB,KAAvB,EAA8BF,KAA9B,EAAqCG,IAArC,CAAP;AACA;AAhBwB;AAAA;AAAA,2BAkBlBH,KAlBkB,EAkBX;AACb,WAAOC,YAAYC,IAAZ,CAAiB,IAAjB,EAAuB,QAAvB,EAAiCF,KAAjC,CAAP;AACA;AApBwB;AAAA;AAAA,8BAsBdD,OAtBc,EAsBL;AACnB,SAAKA,OAAL,GAAeA,OAAf;AACA;AAxBwB;;AAAA;AAAA;;AA2B1B,UAASE,WAAT,CAAqBG,IAArB,EAAoD;AAAA;;AAAA,MAAzBJ,KAAyB,yDAAjB,EAAiB;AAAA,MAAbG,IAAa,yDAAN,IAAM;;AACnD,SAAO,IAAIE,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACvC,OAAIC,MAAM,IAAIC,cAAJ,EAAV;AACAD,OAAIE,IAAJ,CAASN,IAAT,EAAe,MAAKL,OAAL,GAAeC,KAA9B,EAAqC,IAArC;AACAQ,OAAIG,gBAAJ,CAAqB,MAArB,EAA6B,UAASC,EAAT,EAAa;AACzC,QAAIC,WAAWC,cAAcF,GAAGG,MAAH,CAAUF,QAAxB,CAAf;AACAP,YAAQO,QAAR;AACA,IAHD;AAIAL,OAAIG,gBAAJ,CAAqB,OAArB,EAA8B,UAAUC,EAAV,EAAc;AAC3C,QAAII,QAAQC,UAAUL,GAAGG,MAAb,CAAZ;AACAR,WAAOS,KAAP;AACA,IAHD;;AAKA,OAAGZ,SAAS,MAAT,IAAmBA,SAAS,KAA/B,EAAsC;AACrCI,QAAIU,gBAAJ,CAAqB,cAArB,EAAqC,kBAArC;AACAV,QAAIW,IAAJ,CAAShB,IAAT;AACA,IAHD,MAIK,IAAGC,SAAS,KAAT,IAAkBA,SAAS,QAA9B,EACJI,IAAIW,IAAJ,CAAS,IAAT;AACD,GAlBM,CAAP;AAmBA;;AAED,UAASL,aAAT,CAAuBD,QAAvB,EAAiC;AAChC,MAAIO,SAASC,SAAb;AACA,MAAI;AACHD,YAASE,KAAKC,KAAL,CAAWV,QAAX,CAAT;AACA,GAFD,CAEE,OAAMW,CAAN,EAAS;AACVJ,YAASP,QAAT;AACAY,WAAQC,GAAR,CAAY,SAAZ,EAAuBF,CAAvB,EAA0BJ,MAA1B;AACA;AACD,SAAOA,MAAP;AACA;;AAED,UAASH,SAAT,CAAmBd,IAAnB,EAAyB;AACxB,MAAIa,QAAQ,IAAIW,KAAJ,EAAZ;AACAX,QAAMY,IAAN,GAAa,UAAb;AACAZ,QAAMa,OAAN,GAAgB,eAAhB;AACAb,QAAMb,IAAN,GAAaA,IAAb;AACA,SAAOa,KAAP;AACA;;AAED,QAAOlB,QAAP;AACA,CArEc,EAAf","file":"main.js","sourcesContent":["let EasyAjax = (function() {\n\tclass EasyAjax {\n\t\tconstructor(baseUrl) {\n\t\t\tthis.baseUrl = baseUrl;\n\t\t}\n\n\t\tget(query) {\n\t\t\treturn makeRequest.call(this, 'GET', query);\n\t\t}\n\n\t\tpost(query, data) {\n\t\t\treturn makeRequest.call(this, 'POST', query, data);\n\t\t}\n\n\t\tput(query, data) {\n\t\t\treturn makeRequest.call(this, 'PUT', query, data);\n\t\t}\n\n\t\tdelete(query) {\n\t\t\treturn makeRequest.call(this, 'DELETE', query);\n\t\t}\n\n\t\tsetBaseUrl(baseUrl) {\n\t\t\tthis.baseUrl = baseUrl;\n\t\t}\n\t}\n\n\tfunction makeRequest(type, query = '', data = null) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tlet xhr = new XMLHttpRequest();\n\t\t\txhr.open(type, this.baseUrl + query, true);\n\t\t\txhr.addEventListener('load', function(ev) {\n\t\t\t\tlet response = parseResponse(ev.target.response);\n\t\t\t\tresolve(response);\n\t\t\t});\n\t\t\txhr.addEventListener('error', function (ev) {\n\t\t\t\tlet error = makeError(ev.target);\n\t\t\t\treject(error);\n\t\t\t});\n\t\t\n\t\t\tif(type === 'POST' || type === 'PUT') {\n\t\t\t\txhr.setRequestHeader(\"Content-type\", \"application/json\");\n\t\t\t\txhr.send(data);\t\n\t\t\t}\n\t\t\telse if(type === 'GET' || type === 'DELETE')\t\n\t\t\t\txhr.send(null);\n\t\t});\n\t}\n\n\tfunction parseResponse(response) {\n\t\tlet result = undefined;\n\t\ttry {\n\t\t\tresult = JSON.parse(response);\n\t\t} catch(e) {\n\t\t\tresult = response;\n\t\t\tconsole.log('Error: ', e, result);\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction makeError(data) {\n\t\tlet error = new Error();\n\t\terror.name = 'UrlError';\n\t\terror.message = 'Incorrect URL';\n\t\terror.data = data;\n\t\treturn error;\n\t}\n\n\treturn EasyAjax;\n})();\n"],"sourceRoot":"/source/"}